<!--
  Math Quest â€“ Mental Math Trainer
  File: index.html
  Role: Main HTML shell for the game. Defines layout, screens (start, game, summary),
        and loads all CSS/JS modules.
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Math Quest â€“ Mental Math Trainer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Modular CSS structure: base â†’ layout â†’ components â†’ themes -->
  <link rel="stylesheet" href="styles/base.css" />
  <link rel="stylesheet" href="styles/layout.css" />
  <link rel="stylesheet" href="styles/cards.css" />
  <link rel="stylesheet" href="styles/buttons.css" />
  <link rel="stylesheet" href="styles/levels.css" />
  <link rel="stylesheet" href="styles/xp.css" />
  <link rel="stylesheet" href="styles/leaderboard.css" />
  <link rel="stylesheet" href="styles/game.css" />
  <link rel="stylesheet" href="styles/summary.css" />
  <link rel="stylesheet" href="styles/animations.css" />
  <link rel="stylesheet" href="styles/theme-dark.css" />
  <link rel="stylesheet" href="styles/theme-light.css" />
  <!-- Favicon: glowing division symbol used as browser tab icon -->
  <link rel="icon" type="image/png" href="favicon.png" />
  <!-- Optional: Better support for iOS home-screen icons -->
  <link rel="apple-touch-icon" href="favicon.png" />
</head>
<body>
  <div class="app">
    <div class="shell">
      <div class="inner">
        <!--
          HEADER
          - Branding (logo + title)
          - Current player pill
          - Theme toggle (dark/light)
        -->
        <header>
          <div class="brand">
            <div class="brand-logo">â—</div>
            <div class="brand-text">
              <h1>Math Quest</h1>
              <p>Daily mental math workout</p>
            </div>
          </div>
          <div class="player-pill" id="playerPill">
            ğŸ‘¤ Player: <span id="playerPillName">Guest</span>
          </div>
          <button id="themeToggle" class="secondary small theme-btn" style="margin-left:8px;">
            <span id="themeIcon" class="theme-icon">ğŸŒ™</span>
          </button>
        </header>

        <main>
          <!--
            START SCREEN
            - Left card: sign-in, danger zone, recent players, leaderboard
            - Right card: feature overview, XP bar, levels preview
          -->
          <section class="screen active" id="startScreen">
            <div class="pill-tag">
              <span>ğŸ§ </span> Designed for adults
            </div>

            <div class="start-layout">
              <!--
                LEFT CARD: player sign-in, danger actions, recent players, leaderboard
              -->
              <div class="card">
                <h2>Sign in to your math session</h2>
                <p>Short, focused mental math rounds designed as a quick brain workout.</p>

                <!-- Player name input -->
                <label for="playerName">Player name</label>
                <input
                  type="text"
                  id="playerName"
                  maxlength="12"
                  placeholder="e.g. Alex, Taylor"
                />

                <!-- Primary start CTA -->
                <div class="btn-row">
                  <button id="startBtn" class="pulse-primary">
                    Start Adventure
                    <span>â–¶</span>
                  </button>
                </div>

                <!--
                  Danger zone:
                  - Reset progress for current player
                  - Remove all stored players (but keep leaderboard)
                -->
                <div class="danger-row">
                  <div class="danger-label">Danger zone</div>

                  <button class="secondary small danger-soft" id="resetProgressBtn">
                    <span>â†º</span>
                    Reset progress
                  </button>

                  <button class="secondary small danger-hard" id="clearPlayersBtn">
                    <span>ğŸ—‘</span>
                    Remove all players
                  </button>
                </div>

                <!-- Recent players pill row (last 3 profiles on this device) -->
                <div id="recentPlayers" class="recent-players" style="display:none; margin-top:10px;">
                  <div class="recent-title">Recent players:</div>
                  <div class="recent-list" id="recentPlayersList"></div>
                </div>

                <!-- Leaderboard showing top players by total stars -->
                <div class="leaderboard" id="leaderboard" style="margin-top:12px; display:none;">
                  <div class="leaderboard-title">Leaderboard (total stars)</div>
                  <div class="leaderboard-list" id="leaderboardList"></div>
                </div>

                <!-- Hint when progress is found in localStorage -->
                <div class="xp-caption" id="resumeHint" style="margin-top:10px; display:none;">
                  Progress found on this device â€” weâ€™ll keep your stars.
                </div>
              </div>

              <!--
                RIGHT CARD: game overview + XP bar + level tiles preview
              -->
              <div class="card">
                <h2>Whatâ€™s inside? âœ¨</h2>
                <ul class="feature-list">
                  <li><span class="feature-icon">ğŸ¯</span> Levels that ramp up in difficulty</li>
                  <li><span class="feature-icon">â­</span> Up to 3 stars per level for performance</li>
                  <li><span class="feature-icon">ğŸ“ˆ</span> Progress bar to track total stars</li>
                  <li><span class="feature-icon">ğŸ”’</span> Unlock tougher sets as you improve</li>
                </ul>

                <!-- Overall XP bar (total stars vs max possible) -->
                <div class="xp-bar-wrap" style="margin-top:14px;">
                  <div class="xp-bar" id="xpBar"></div>
                </div>
                <div class="xp-caption">
                  <span>Overall progress</span>
                  <span id="xpLabel">0 stars collected</span>
                </div>

                <!-- Level tiles; populated dynamically from LEVELS config -->
                <div class="levels-grid" id="levelGrid">
                  <!-- Levels preview will be injected here -->
                </div>
              </div>
            </div>
          </section>

          <!--
            GAME SCREEN
            - Shows current level, question count, timer, streak, and options
          -->
          <section class="screen" id="gameScreen">
            <!-- Header: level badge + question progress bar -->
            <div class="game-header">
              <div>
                <div class="badge" id="levelBadge">
                  ğŸŒŸ Level 1 Â· Warm-up
                </div>
                <div class="game-meta" id="gameMeta">
                  <!-- e.g. Question 3 of 10 -->
                </div>
              </div>
              <div class="progress-outer">
                <div class="progress-inner" id="questionProgress"></div>
              </div>
            </div>

            <!-- Question card: main gameplay area -->
            <div class="question-card" id="questionCard">
              <div class="question-text" id="questionText">5 + 3 = ?</div>
              <div class="question-sub" id="questionSub">Tap the correct answer:</div>

              <!-- Multiple-choice options get injected here -->
              <div class="options-grid" id="optionsGrid">
                <!-- options here -->
              </div>

              <!-- Inline feedback for the current question -->
              <div class="feedback" id="feedback"></div>

              <!-- Bottom bar: timer, streak, and back button -->
              <div class="bottom-bar">
                <span id="timerLabel">â± 10s</span>
                <span id="streakLabel">ğŸ”¥ Streak: 0</span>
                <button class="small secondary" id="backToMenuBtn">Back to menu</button>
              </div>
            </div>
          </section>

          <!--
            SUMMARY SCREEN
            - Shown at the end of each level
            - Displays stars, stats, and navigation actions
          -->
          <section class="screen" id="summaryScreen">
            <div class="card summary-card">
              <!-- Particle confetti layer (for 3-star wins) -->
              <div id="confettiContainer" class="confetti-container"></div>

              <!-- Title + descriptive summary -->
              <h2 id="summaryTitle">Level complete! ğŸ‰</h2>
              <p id="summarySubtitle">Nice work. Hereâ€™s how you did:</p>

              <!-- Stars earned for this level -->
              <div class="summary-stars" id="summaryStars">
                <!-- stars inserted -->
              </div>

              <!-- Stat grid: accuracy, questions, best streak, total stars -->
              <div class="summary-grid">
                <div class="stat-chip">
                  <strong id="summaryAccuracy">100% correct</strong>
                  Accuracy
                </div>
                <div class="stat-chip">
                  <strong id="summarySpeed">â€“</strong>
                  Questions this round
                </div>
                <div class="stat-chip">
                  <strong id="summaryBestStreak">ğŸ”¥ x0</strong>
                  Best correct streak
                </div>
                <div class="stat-chip">
                  <strong id="summaryTotalStars">0 â­</strong>
                  Total stars collected
                </div>
              </div>

              <!-- Summary actions: next level, replay, back to menu -->
              <div class="btn-row" style="margin-top:14px;">
                <button id="nextLevelBtn">
                  Next Level
                  <span>â¡</span>
                </button>
                <button class="secondary" id="replayLevelBtn">
                  Replay this level
                </button>
                <button class="secondary small" id="toMenuBtn">
                  Back to level select
                </button>
              </div>
            </div>
          </section>
        </main>
      </div>
    </div>
  </div>

  <!--
    SCRIPT LOADING ORDER
    - storage.js: global config, LEVELS, state, localStorage helpers
    - helpers.js: utilities (random, feedback, confetti, etc.)
    - renderer.js: DOM rendering for grids, leaderboard, screens
    - engine.js: core game logic (questions, scoring, timers)
    - events.js: DOM event wiring and theme toggle
  -->
  <script src="js/storage.js"></script>
  <script src="js/helpers.js"></script>
  <script src="js/renderer.js"></script>
  <script src="js/engine.js"></script>
  <script src="js/events.js"></script>
</body>
</html>
